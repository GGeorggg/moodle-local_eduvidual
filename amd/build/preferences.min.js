define(["jquery","core/ajax","core/config","core/notification","core/str","core/url","local_eduvidual/main"],function(f,b,g,c,e,a,d){return{setBackground:function(j){if(f(j).attr("data-image")=="none"){var i=""}else{if(f(j).is("input")){var k=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(f(j).val());var h=[parseInt(k[1],16),parseInt(k[2],16),parseInt(k[3],16),].join("x");var i=g.wwwroot+"/local/eduvidual/pix/bg_pixel.php?color="+h}else{var i=f(j).css("background-image").replace("url(","").replace(")","").replace('"',"").replace('"',"")}}f(j).css("filter","blur(1px)");require(["local_eduvidual/main"],function(l){l.connect({module:"preferences",act:"background",background:i},{sender:j,signalItem:f(j)})})},result:function(h){if(h.data.act=="background"){f("#local_eduvidual_preferences_background").find("a, input").css("filter","unset");if(h.result.status=="ok"){f("#local_eduvidual_preferences_background").find("a, input").parent().removeClass("active");f(h.payload.sender).parent().addClass("active");f("body").css("background-image","url("+h.data.background+")")}}},}});