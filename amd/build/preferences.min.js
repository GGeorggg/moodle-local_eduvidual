define(["jquery","core/ajax","core/notification","core/str","core/url","block_eduvidual/main"],function(a,b,c,d,e,f){return{setBackground:function(b){var c=a(b).css("background-image").replace("url(","").replace(")","").replace('"',"").replace('"',"");a(b).css("filter","blur(1px)"),require(["block_eduvidual/main"],function(d){d.connect({module:"preferences",act:"background",background:c},{sender:b,signalItem:a(b)})})},result:function(b){"background"==b.data.act&&(a("#block_eduvidual_preferences_background a").css("filter","unset"),"ok"==b.result.status&&(a("#block_eduvidual_preferences_background a").parent().removeClass("active"),a(b.payload.sender).parent().addClass("active"),a("#block_eduvidual_background").css("background-image","url("+b.data.background+")")))}}});