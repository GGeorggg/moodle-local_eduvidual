define(["jquery","core/ajax","core/notification","core/str","core/url","local_eduvidual/main"],function(f,b,c,e,a,d){return{check:function(){var g=f("#eduvidual_registration_orgid").val();require(["local_eduvidual/main"],function(h){h.connect({module:"register",stage:0,orgid:g})})},request:function(){var g=f("#eduvidual_registration_orgid").val();require(["local_eduvidual/main"],function(h){h.connect({module:"register",stage:1,orgid:g})})},validate:function(){var i=f("#eduvidual_registration_orgid").val();var h=f("#eduvidual_registration_token").val();var g=f("#eduvidual_registration_name").val();require(["local_eduvidual/main"],function(j){j.connect({module:"register",stage:2,orgid:i,token:h,name:g})})},result:function(g){if(g.result&&g.result.status&&g.result.status=="ok"){console.log(g.result);if(g.data.stage==0){f("#local_eduvidual_registration_stage-1, #local_eduvidual_registration_stage-0-error").css({display:"none"});if(g.result.authenticated>0){f("#local_eduvidual_registration_stage-0-error").css({display:"block"})}else{f("#local_eduvidual_registration_stage-1").css({display:"block"})}f("#eduvidual_registration_name").val(g.result.name.substring(0,30));f("#eduvidual_registration_mail").html(g.result.mail)}if(g.data.stage==1){e.get_strings([{key:"mailregister:confirmation",component:"local_eduvidual"},{key:"mailregister:confirmation:mailsent",component:"local_eduvidual"},{key:"ok"}]).done(function(h){c.alert(h[0],h[1],h[2])}).fail(c.exception)}if(g.data.stage==2){f("#local_eduvidual_registration_stage-0").css({display:"none"});f("#local_eduvidual_registration_stage-1").css({display:"none"});f("#local_eduvidual_registration_stage-2").css({display:"block"});f("#local_eduvidual_registration_homecategory").attr("href","/course/index.php?categoryid="+g.result.categoryid).html(g.result.name)}}else{if(g.result.error&&g.result.error!=""){c.alert("Error",g.result.error,"ok")}else{if(g.result.status!="silent"){c.alert("Error","Action failed!","ok")}}}},}});